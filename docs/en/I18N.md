# Internationalization (i18n) Guide

This document explains how the multilingual system works in the Miguel √Ångel de Dios portfolio, covering implementation details, translation management, and best practices for internationalization.

## üåê Overview

The portfolio supports two languages:

- **English (en)** - Default language
- **Spanish (es)** - Secondary language

The internationalization system is built using **React i18next**, providing a robust and scalable solution for multilingual content management.

## üèóÔ∏è Architecture

### Technology Stack

- **react-i18next**: React integration for i18next
- **i18next**: Core internationalization framework
- **i18next-browser-languagedetector**: Automatic language detection

### File Structure

```text
src/
‚îú‚îÄ‚îÄ i18n/
‚îÇ   ‚îî‚îÄ‚îÄ i18n.ts                 # i18next configuration
‚îú‚îÄ‚îÄ locales/
‚îÇ   ‚îú‚îÄ‚îÄ en/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ translation.json    # English translations
‚îÇ   ‚îî‚îÄ‚îÄ es/
‚îÇ       ‚îî‚îÄ‚îÄ translation.json    # Spanish translations
‚îî‚îÄ‚îÄ components/
    ‚îî‚îÄ‚îÄ LanguageSwitcher.tsx    # Language toggle component
```

## ‚öôÔ∏è Configuration

### i18next Setup

**File**: `src/i18n/i18n.ts`

```typescript
import i18n from 'i18next'
import { initReactI18next } from 'react-i18next'
import LanguageDetector from 'i18next-browser-languagedetector'

// Import translation files
import enTranslations from '../locales/en/translation.json'
import esTranslations from '../locales/es/translation.json'

i18n
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    resources: {
      en: {
        translation: enTranslations,
      },
      es: {
        translation: esTranslations,
      },
    },
    fallbackLng: 'en',
    debug: import.meta.env.DEV,
    interpolation: {
      escapeValue: false, // React already escapes values
    },
    detection: {
      order: ['path', 'localStorage', 'navigator'],
      lookupFromPathIndex: 0,
      checkWhitelist: true,
    },
  })

export default i18n
```

### Configuration Options

- **fallbackLng**: Default language when detection fails
- **debug**: Enable debug mode in development
- **detection**: Language detection strategy
- **interpolation**: Variable interpolation settings

## üìÅ Translation Structure

### Translation File Organization

Both language files follow the same nested structure for consistency:

```json
{
  "welcome": "Welcome",
  "navigation": {
    "home": "Home",
    "projects": "Projects",
    "about": "About",
    "contact": "Contact"
  },
  "pages": {
    "home": {
      "title": "Welcome to My Portfolio",
      "subtitle": "Front-End Developer"
    },
    "projects": {
      "title": "My Projects",
      "description": "A showcase of my work"
    }
  },
  "components": {
    "contactForm": {
      "title": "Contact Me",
      "fields": {
        "name": "Name",
        "email": "Email",
        "message": "Message"
      },
      "submit": "Send Message"
    }
  }
}
```

### Translation Keys Naming Convention

1. **Lowercase with dots**: `pages.home.title`
2. **Descriptive nesting**: Group related translations
3. **Consistent structure**: Same hierarchy in both languages
4. **Meaningful names**: Self-documenting key names

## üîß Usage Patterns

### Basic Translation Hook

```typescript
import { useTranslation } from 'react-i18next'

const HomePage = () => {
  const { t } = useTranslation()
  
  return (
    <div>
      <h1>{t('pages.home.title')}</h1>
      <p>{t('pages.home.description')}</p>
    </div>
  )
}
```

### Translation with Variables

```typescript
// Translation file
{
  "greeting": "Hello, {{name}}! You have {{count}} messages."
}

// Component usage
const WelcomeMessage = ({ userName, messageCount }) => {
  const { t } = useTranslation()
  
  return (
    <p>{t('greeting', { name: userName, count: messageCount })}</p>
  )
}
```

### Pluralization

```typescript
// Translation file
{
  "itemCount": "{{count}} item",
  "itemCount_plural": "{{count}} items"
}

// Component usage
const ItemCounter = ({ count }) => {
  const { t } = useTranslation()
  
  return <span>{t('itemCount', { count })}</span>
}
```

### Translation with Objects

```typescript
// Translation file
{
  "features": [
    {
      "title": "Fast Performance",
      "description": "Optimized for speed"
    },
    {
      "title": "Responsive Design",
      "description": "Works on all devices"
    }
  ]
}

// Component usage
const FeaturesList = () => {
  const { t } = useTranslation()
  const features = t('features', { returnObjects: true })
  
  return (
    <div>
      {features.map((feature, index) => (
        <div key={index}>
          <h3>{feature.title}</h3>
          <p>{feature.description}</p>
        </div>
      ))}
    </div>
  )
}
```

## üåç Language Switching

### LanguageSwitcher Component

**File**: `src/components/LanguageSwitcher.tsx`

```typescript
import { useTranslation } from 'react-i18next'
import { useNavigate, useLocation } from 'react-router'

const LanguageSwitcher = () => {
  const { i18n } = useTranslation()
  const navigate = useNavigate()
  const location = useLocation()
  
  const toggleLanguage = () => {
    const currentLang = i18n.language
    const newLang = currentLang === 'en' ? 'es' : 'en'
    
    // Change language
    i18n.changeLanguage(newLang)
    
    // Update URL path
    const pathSegments = location.pathname.split('/')
    pathSegments[1] = newLang
    const newPath = pathSegments.join('/')
    
    navigate(newPath, { replace: true })
  }
  
  return (
    <button
      onClick={toggleLanguage}
      className="flex items-center space-x-2 px-3 py-2 rounded-md hover:bg-gray-100"
      aria-label="Toggle language"
    >
      <span className="text-sm font-medium">
        {i18n.language === 'en' ? 'ES' : 'EN'}
      </span>
    </button>
  )
}
```

### URL-based Language Routing

The application uses URL segments to maintain language state:

- `/en/home` - English home page
- `/es/home` - Spanish home page
- `/en/projects` - English projects page
- `/es/projects` - Spanish projects page

### Language Persistence

Language preferences are stored in:

1. **URL path**: Current language in URL
2. **localStorage**: Persistent preference
3. **Browser detection**: Fallback detection

## üéØ Translation Management

### Adding New Translations

1. **Add to English file** (`src/locales/en/translation.json`)

   ```json
   {
     "newSection": {
       "title": "New Section Title",
       "description": "Section description"
     }
   }
   ```

2. **Add to Spanish file** (`src/locales/es/translation.json`)

   ```json
   {
     "newSection": {
       "title": "T√≠tulo de Nueva Secci√≥n",
       "description": "Descripci√≥n de la secci√≥n"
     }
   }
   ```

3. **Use in component**

   ```typescript
   const { t } = useTranslation()
   return <h2>{t('newSection.title')}</h2>
   ```

### Translation Validation

To ensure translation completeness:

```typescript
// Utility to check missing translations
const validateTranslations = (enTranslations, esTranslations) => {
  const flattenObject = (obj, prefix = '') => {
    return Object.keys(obj).reduce((acc, key) => {
      const value = obj[key]
      const newKey = prefix ? `${prefix}.${key}` : key
      
      if (typeof value === 'object' && value !== null) {
        Object.assign(acc, flattenObject(value, newKey))
      } else {
        acc[newKey] = value
      }
      
      return acc
    }, {})
  }
  
  const enKeys = Object.keys(flattenObject(enTranslations))
  const esKeys = Object.keys(flattenObject(esTranslations))
  
  const missingInSpanish = enKeys.filter(key => !esKeys.includes(key))
  const missingInEnglish = esKeys.filter(key => !enKeys.includes(key))
  
  console.log('Missing in Spanish:', missingInSpanish)
  console.log('Missing in English:', missingInEnglish)
}
```

## üìù Content Guidelines

### Writing Effective Translations

1. **Keep context in mind**: Translations should fit the UI context
2. **Maintain tone consistency**: Professional yet approachable tone
3. **Consider length differences**: Spanish text is typically 15-30% longer
4. **Cultural adaptation**: Adapt content for cultural relevance

### Translation Quality Checklist

- [ ] All keys exist in both languages
- [ ] Text fits in UI components
- [ ] Cultural appropriateness
- [ ] Consistent terminology
- [ ] Proper punctuation and grammar
- [ ] Variable interpolation works correctly

## üîß Development Workflow

### Testing Translations

1. **Manual testing**: Switch languages and verify content
2. **Automated testing**: Test translation key existence
3. **Visual testing**: Check layout with different text lengths

```typescript
// Test translation keys exist
describe('Translations', () => {
  it('should have all required keys in both languages', () => {
    const requiredKeys = [
      'navigation.home',
      'navigation.projects',
      'navigation.about',
      'navigation.contact'
    ]
    
    requiredKeys.forEach(key => {
      expect(enTranslations).toHaveProperty(key)
      expect(esTranslations).toHaveProperty(key)
    })
  })
})
```

### Adding New Pages

When adding new pages, follow this checklist:

1. Create translation keys for both languages
2. Update navigation if needed
3. Add route configuration for both languages
4. Test language switching on the new page

## üöÄ Performance Optimization

### Lazy Loading Translations

For larger applications, consider lazy loading translations:

```typescript
const loadTranslations = async (language: string) => {
  const translations = await import(`../locales/${language}/translation.json`)
  return translations.default
}
```

### Bundle Size Optimization

Current setup includes all translations in the bundle. For optimization:

1. **Code splitting**: Load translations per route
2. **Dynamic imports**: Load translations on demand
3. **Translation caching**: Cache loaded translations

## üåê SEO Considerations

### Language Meta Tags

Add appropriate meta tags for each language:

```html
<html lang="en">
<meta property="og:locale" content="en_US" />
<link rel="alternate" hreflang="es" href="https://example.com/es" />
<link rel="alternate" hreflang="en" href="https://example.com/en" />
```

### Sitemap Generation

Generate separate sitemaps for each language:

```xml
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
        xmlns:xhtml="http://www.w3.org/1999/xhtml">
  <url>
    <loc>https://example.com/en/home</loc>
    <xhtml:link rel="alternate" hreflang="es" href="https://example.com/es/home"/>
    <xhtml:link rel="alternate" hreflang="en" href="https://example.com/en/home"/>
  </url>
</urlset>
```

## üîç Common Issues and Solutions

### Issue: Missing Translation Keys

**Problem**: Translation key doesn't exist in one language

**Solution**:

- Add missing key to translation file
- Use fallback language
- Implement key validation

### Issue: Text Overflow

**Problem**: Spanish text is longer and breaks layout

**Solution**:

- Design flexible layouts
- Test with longer text
- Use CSS text truncation when appropriate

### Issue: Language Detection Not Working

**Problem**: Browser language detection fails

**Solution**:

- Check detection configuration
- Verify supported languages list
- Implement manual fallback

## üìö Resources

- [React i18next Documentation](https://react.i18next.com/)
- [i18next Documentation](https://www.i18next.com/)
- [ICU Message Format](https://unicode-org.github.io/icu/userguide/format_parse/messages/)
- [Web Internationalization Best Practices](https://www.w3.org/International/techniques/authoring-html)

---

This internationalization guide should be updated as new languages are added or translation patterns evolve.
